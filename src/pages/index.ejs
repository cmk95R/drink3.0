<!DOCTYPE html>
<html lang="es">

<head>
  <title>Iniciar sesión</title>
  <link rel="stylesheet" href="../resources/css/index.css">
  <%- include('partials/head') %>
</head>

<body>
  <main>
    <form id="loginForm" action="/auth/login" method="POST" class="form-container">
      <div class="text-center">
        <img src="../resources/imagenes/stock2b_logo_466x429.png" alt="Logo" width="50%" height="50%">
      </div>
      <h1 class="text-center">Iniciar sesión</h1>

      <% if (typeof error !=='undefined' ) { %>
        <div id="errorMessages" style="color: red; text-align: center; margin-bottom: 10px;">
          <%= error %>
        </div>
        <% } %>

          <div class="form-group">
            <label for="email">Correo electrónico</label>
            <input type="text" id="email" name="email" placeholder="name@example.com"
              class="form-control <%= (typeof invalidFields !== 'undefined' && invalidFields.includes('email')) ? 'is-invalid' : '' %>">
          </div>

          <div class="form-group">
            <label for="password">Contraseña</label>
            <input type="password" id="password" name="password" placeholder="********"
              class="form-control <%= (typeof invalidFields !== 'undefined' && invalidFields.includes('password')) ? 'is-invalid' : '' %>">
          </div>

          <div class="text-center">
            <span class="link" onclick="abrirModal()">¿Olvidaste tu contraseña?</span>
          </div>

          <button type="submit" class="btn-color notHover">Enviar</button>

          <p class="text-center mt-3 text-muted">&copy; 2025</p>
    </form>
  </main>

  <!-- Modal -->
  <div id="resetPasswordModal" class="modal">
    <form action="/api/reset-password" method="POST" class="modal-content">
      <div class="modal-header">
        <h5>Restablecer Contraseña</h5>
        <button type="button" class="btn-close" onclick="cerrarModal()"></button>
      </div>
      <div class="modal-body">
        <p>Por favor ingresa tu correo electrónico para recibir un enlace para restablecer tu contraseña.</p>
        <input type="email" name="email" placeholder="Ingresa tu correo electrónico" required>
      </div>
      <div class="modal-footer">
        <button type="submit" class="btn-color notHover">Enviar enlace</button>
      </div>
    </form>
  </div>

  <!-- Scripts -->
  <script>
    function abrirModal() {
      document.getElementById('resetPasswordModal').style.display = 'flex';
    }

    function cerrarModal() {
      document.getElementById('resetPasswordModal').style.display = 'none';
    }
  </script>
  <script src="../resources/js/carrito.js"></script>
  <script src="../resources/js/notify.js"></script>
</body>

</html>